#python script for retrieving log files, determining total number of requests, and getting requests in a 6 month time period
# By Lauren, Linda, Diego, and Harley

import requests

url = 'https://s3.amazonaws.com/tcmg476/http_access_log'
r = requests.get(url, allow_redirects=True)

with open("python.txt","wb") as textfile:
    for chunk in r.iter_content(chunk_size=1024):

# writing to pdf file
        if chunk:
            textfile.write(chunk)
            result={"total_requests":0,}

# Question 1

# finds date of last entry
with open("python.txt", "r") as textfile:
    last_line = textfile.readlines()[-1]
    last_datetime = last_line.split()[3]
    clean_datetime = datetime.strptime(last_datetime, '[%d/%b/%Y:%H:%M:%S')
    last_date = clean_datetime.date()


# Question 2
            
file = open("python.txt")
total_requests = sum(1 for line in file)
print("Total number of requests:", total_requests)

